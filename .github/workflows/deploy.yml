name: Build, Deploy, and Accept

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  call-build:
    uses: trevorism/actions-workflows/.github/workflows/alpha-build.yml@master

  call-deploy:
    uses: trevorism/actions-workflows/.github/workflows/alpha-deploy.yml@master
    needs: call-build
    with:
      gcp_project: 'trevorism-testing'
      gcp_project_id: '729203316942'
      version: '0-2-0'

  call-accept:
    uses: trevorism/actions-workflows/.github/workflows/alpha-accept.yml@master
    secrets:
      classpath_secrets: ${{ toJSON(secrets) }}

